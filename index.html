<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025年度追星总结</title>
    <!-- 引入截图库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* 全局样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scroll-behavior: smooth; /* 平滑滚动 */
        }

        /* 字体导入接口（用户可替换字体文件路径） */
        @font-face {
            font-family: 'A82EasyStreet';
            src: url('A82 Easy Street Alt EPS.ttf') format('truetype');
            /* 预留自定义字体接口：替换url为用户字体文件路径即可 */
        }
        @font-face {
            font-family: 'mingliu';
            src: url('mingliu.ttf') format('truetype');
            /* 预留自定义字体接口：替换url为用户字体文件路径即可 */
        }

        /* 全局样式 */
        body {
            background-color: #ffffff; /* 基础背景色 */
            font-family: 'mingliu', sans-serif; /* 全局默认mingliu字体 */
            color: #090807;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        /* 主容器 */
        .container {
            max-width: 1200px;
            margin: 0 auto; /* 全屏居中 */
            padding: 20px;
        }

        /* 标题样式 */
        .title {
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            margin: 60px 0 40px; /* 预留进度条空间 */
            color: #090807;
        }

        /* 音频进度条容器 - 随页面滚动 */
        .audio-progress {
            width: 25%; /* 页面长度1/4 */
            margin: 40px auto 0; /* 标题上方、居中 */
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 10px;
            color: #090807;
        }

        /* 进度条样式 */
        .progress-bar {
            flex: 1;
            height: 6px;
            border: 1px solid #090807;
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            background-color: rgba(9, 8, 7, 0.8);
        }

        /* 左上角Music按钮 */
        .music-btn {
            position: relative; /* 随页面滚动 */
            margin: 0px 0 0 20px; /* 距左/上20px */
            font-family: 'A82EasyStreet', sans-serif; /* 专属字体 */
            font-size: 20px;
            color: #090807;
            border: 1px solid #090807;
            border-radius: 4px; /* 圆角矩形 */
            background: transparent;
            padding: 4px 12px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .music-btn:active {
            transform: scale(1.05); /* 点击缩放 */
        }

        /* 右上角播放按钮容器 - 随页面滚动 */
        .play-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0px 20px 0 0; /* 距右20px，与Music水平对齐 */
            float: right;
        }

        /* 播放按钮样式 */
        .play-btn {
            width: 40px;
            height: 40px;
            border: 1px solid #090807;
            border-radius: 50%; /* 圆形 */
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .play-btn:active {
            transform: scale(1.05);
        }
        /* 播放/暂停图标 */
        .play-icon {
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 8px 0 8px 14px;
            border-color: transparent transparent transparent #090807;
            margin-left: 2px;
        }
        .pause-icon {
            display: none;
            width: 12px;
            height: 16px;
            justify-content: space-between;
        }
        .pause-icon span {
            width: 3px;
            height: 100%;
            background-color: #090807;
        }

        /* 音量滑块 */
        .volume-slider {
            margin-top: 20px; /* 播放键下方20px */
            writing-mode: bt-lr; /* 垂直滑块 */
            -webkit-appearance: slider-vertical;
            width: 8px;
            height: 80px;
            accent-color: rgba(9, 8, 7, 0.8);
        }

        /* 问题容器 */
        .question-wrapper {
            margin-bottom: 30px; /* 问题间距 */
        }
        .question-text {
            font-size: 16px;
            color: #090807;
            margin-bottom: 10px;
        }

        /* 回答文本域 */
        .answer-input {
            width: 100%;
            min-height: 80px;
            padding: 15px;
            border: none;
            border-radius: 8px; /* 圆角方形 */
            background-color: rgba(239, 191, 77, 0.2); /* 透明度20% */
            color: #090807;
            font-size: 16px;
            font-family: 'mingliu', sans-serif;
            resize: vertical;
            outline: none;
        }

        /* 图片上传按钮 */
        .upload-img-btn {
            font-size: 16px;
            color: #090807;
            border: 1px solid #090807;
            border-radius: 4px;
            padding: 4px 12px;
            background: transparent;
            cursor: pointer;
            margin: 10px 0;
            transition: transform 0.2s ease;
        }
        .upload-img-btn:active {
            transform: scale(1.05);
        }

        /* 图片预览容器 */
        .preview-container {
            display: flex;
            gap: 15px;
            margin: 10px 0;
        }
        .preview-img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            position: relative;
        }
        /* 图片删除按钮 */
        .delete-img {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(0,0,0,0.7);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }

        /* 底部重置按钮 */
        .reset-btn {
            display: block;
            margin: 60px auto 20px; /* 页面最下方居中 */
            font-size: 20px;
            color: #090807;
            border: 1px solid #090807;
            border-radius: 4px;
            background: transparent;
            padding: 4px 12px;
            cursor: pointer;
            transition: transform 0.2s ease;
            font-family: 'mingliu', sans-serif;
        }
        .reset-btn:active {
            transform: scale(1.05);
        }

        /* 右下角导出按钮 */
        .export-btn {
            position: fixed; /* 固定在右下角 */
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid #090807;
            background-color: #eee; /* 浅色模式底色 */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s ease;
            z-index: 99;
        }
        .export-btn:active {
            transform: scale(1.05);
        }
        /* 导出箭头图标 */
        .export-icon {
            width: 14px;
            height: 14px;
            position: relative;
        }
        .export-icon::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 6px 0 6px 10px;
            border-color: transparent transparent transparent #090807;
        }
        .export-icon::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 8px;
            height: 8px;
            border: 1px solid #090807;
            border-left: none;
            border-bottom: none;
            border-radius: 0 4px 0 0;
        }

        /* 弹窗通用样式 */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px; /* 圆角方形 */
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        .modal-text {
            font-size: 16px;
            margin-bottom: 20px;
            color: #090807;
        }
        .modal-btns {
            display: flex;
            justify-content: space-around;
            gap: 15px;
        }
        .modal-btn {
            padding: 8px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s ease;
            font-family: 'mingliu', sans-serif;
            font-size: 16px;
        }
        .modal-btn:active {
            transform: scale(1.05);
        }
        .cancel-btn {
            border: 1px solid #090807;
            background: transparent;
            color: #090807;
        }
        .confirm-btn {
            border: none;
            background-color: #090807;
            color: #efeeff;
        }

        /* 图片预览弹窗 */
        .img-preview-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 101;
        }
        .img-preview {
            max-width: 90%;
            max-height: 90%;
            border-radius: 8px;
        }

        /* 移动端适配 */
        @media (max-width: 768px) {
            .title {
                font-size: 28px;
            }
            .audio-progress {
                width: 80%; /* 移动端进度条占比增大 */
            }
            .music-btn, .reset-btn {
                font-size: 18px;
            }
            .preview-img {
                width: 150px;
                height: 150px;
            }
            .play-container {
                margin-top: -50px;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 24px;
            }
            .question-text, .answer-input {
                font-size: 14px;
            }
            .preview-img {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- 音频进度条 -->
    <div class="audio-progress">
        <span class="current-time">00:00</span>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
        <span class="total-time">00:00</span>
    </div>

    <!-- 左上角Music按钮 -->
    <button class="music-btn" id="musicBtn">Music</button>
    <input type="file" id="audioInput" accept=".mp3,.aac" style="display: none;" />

    <!-- 右上角播放按钮容器 -->
    <div class="play-container">
        <button class="play-btn" id="playBtn" disabled>
            <div class="play-icon"></div>
            <div class="pause-icon">
                <span></span>
                <span></span>
            </div>
        </button>
        <input type="range" min="0" max="1" step="0.01" value="0.8" class="volume-slider" id="volumeSlider" />
    </div>

    <!-- 主容器 -->
    <div class="container" id="captureArea">
        <h1 class="title">2025年度追星总结</h1>

        <!-- 问题1 -->
        <div class="question-wrapper">
            <div class="question-text">1. 如果用百分比表达，你会给今年的追星运赋值__？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题2 -->
        <div class="question-wrapper">
            <div class="question-text">2. 今年宫中进了哪些新人？（新入坑）</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题3 -->
        <div class="question-wrapper">
            <div class="question-text">3. 今年哪些爱豆对你来说是“曾经爱过”？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题4 -->
        <div class="question-wrapper">
            <div class="question-text">4. 今年有谁是“盛宠不衰”？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题5 -->
        <div class="question-wrapper">
            <div class="question-text">5. 今年你的年度专辑TOP3是？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题6 -->
        <div class="question-wrapper">
            <div class="question-text">6. 今年你的年度歌曲TOP3/5是？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题7 -->
        <div class="question-wrapper">
            <div class="question-text">7. 今年哪场演唱会/舞台/活动最令你记忆深刻？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题8 -->
        <div class="question-wrapper">
            <div class="question-text">8. 今年追了多少次线下？最想回到哪个瞬间？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题9 -->
        <div class="question-wrapper">
            <div class="question-text">9. 今年你担最让你心动的瞬间是？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题10（带图片上传） -->
        <div class="question-wrapper">
            <div class="question-text">10. 今年最喜欢的造型是？（可附图）</div>
            <button class="upload-img-btn" id="uploadImgBtn">+可上传图片</button>
            <input type="file" id="imgInput" accept=".png,.jpg,.webp" multiple style="display: none;" />
            <div class="preview-container" id="previewContainer"></div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题11 -->
        <div class="question-wrapper">
            <div class="question-text">11. 你正在给___当妈</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题12 -->
        <div class="question-wrapper">
            <div class="question-text">12. 你正在当____的梦女</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题13 -->
        <div class="question-wrapper">
            <div class="question-text">13. 其实你是___的一体机</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题14 -->
        <div class="question-wrapper">
            <div class="question-text">14. 诡秘不跟你说了我要飞上米其林餐厅享用大餐了（今年你最嗑的一对是？）</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题15 -->
        <div class="question-wrapper">
            <div class="question-text">15. 诡秘你怎么在路边捡垃圾吃啊！（今年最难嗑的一对是？）</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题16 -->
        <div class="question-wrapper">
            <div class="question-text">16. 今年你一直在骂___</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题17 -->
        <div class="question-wrapper">
            <div class="question-text">17. 今年有没有通过___认识了更多同担（因为哪个爱豆/线上[wb/xhs/twi…]/线下[演唱会/签售/byl…]）</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题18 -->
        <div class="question-wrapper">
            <div class="question-text">18. 今年最遗憾的事情是___</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 问题19 -->
        <div class="question-wrapper">
            <div class="question-text">19. 2026新年新愿望</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 附加题 -->
        <div class="question-wrapper">
            <div class="question-text">附加题</div>
        </div>

        <!-- 附加题19 -->
        <div class="question-wrapper">
            <div class="question-text">19. 你担是否在嫂站榜上有名？</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 附加题20 -->
        <div class="question-wrapper">
            <div class="question-text">20. 其实你很想送___上一次脱粉回踩</div>
            <textarea class="answer-input" placeholder="请输入你的回答..."></textarea>
        </div>

        <!-- 重置按钮 -->
        <button class="reset-btn" id="resetBtn">重置</button>
    </div>

    <!-- 右下角导出按钮 -->
    <div class="export-btn" id="exportBtn">
        <div class="export-icon"></div>
    </div>

    <!-- 图片上传失败弹窗 -->
    <div class="modal" id="imgErrorModal">
        <div class="modal-content">
            <div class="modal-text">果咩TT图片上传失败</div>
            <button class="modal-btn confirm-btn" id="closeImgErrorBtn">确定</button>
        </div>
    </div>

    <!-- 重置确认弹窗 -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <div class="modal-text">真的要清空吗？</div>
            <div class="modal-btns">
                <button class="modal-btn cancel-btn" id="cancelResetBtn">手滑了</button>
                <button class="modal-btn confirm-btn" id="confirmResetBtn">确定</button>
            </div>
        </div>
    </div>

    <!-- 导出选项弹窗 -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-text">导出选项</div>
            <div class="modal-btns" style="flex-direction: column; gap: 10px;">
                <button class="modal-btn confirm-btn" id="exportJpgBtn">导出为长图（JPG）</button>
                <button class="modal-btn confirm-btn" id="closeExportBtn">确定</button>
            </div>
        </div>
    </div>

    <!-- 图片预览弹窗 -->
    <div class="img-preview-modal" id="imgPreviewModal">
        <img src="" alt="图片预览" class="img-preview" id="previewImg" />
    </div>

    <script>
        // 全局变量
        let audio = null; // 音频对象
        let uploadedImages = []; // 已上传图片列表

        // DOM元素获取
        const musicBtn = document.getElementById('musicBtn');
        const audioInput = document.getElementById('audioInput');
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.querySelector('.play-icon');
        const pauseIcon = document.querySelector('.pause-icon');
        const volumeSlider = document.getElementById('volumeSlider');
        const progressFill = document.querySelector('.progress-fill');
        const currentTimeEl = document.querySelector('.current-time');
        const totalTimeEl = document.querySelector('.total-time');
        const uploadImgBtn = document.getElementById('uploadImgBtn');
        const imgInput = document.getElementById('imgInput');
        const previewContainer = document.getElementById('previewContainer');
        const resetBtn = document.getElementById('resetBtn');
        const resetModal = document.getElementById('resetModal');
        const cancelResetBtn = document.getElementById('cancelResetBtn');
        const confirmResetBtn = document.getElementById('confirmResetBtn');
        const imgErrorModal = document.getElementById('imgErrorModal');
        const closeImgErrorBtn = document.getElementById('closeImgErrorBtn');
        const exportBtn = document.getElementById('exportBtn');
        const exportModal = document.getElementById('exportModal');
        const exportJpgBtn = document.getElementById('exportJpgBtn');
        const closeExportBtn = document.getElementById('closeExportBtn');
        const imgPreviewModal = document.getElementById('imgPreviewModal');
        const previewImg = document.getElementById('previewImg');
        const captureArea = document.getElementById('captureArea');

        // 1. 音频上传与播放逻辑
        musicBtn.addEventListener('click', () => {
            audioInput.click();
        });

        audioInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            // 验证文件大小（≤10MB）
            if (file.size > 10 * 1024 * 1024) {
                alert('音频文件大小不能超过10MB');
                return;
            }

            // 创建音频对象
            audio = new Audio(URL.createObjectURL(file));
            playBtn.disabled = false;

            // 音频加载完成后更新总时长
            audio.addEventListener('loadedmetadata', () => {
                totalTimeEl.textContent = formatTime(audio.duration);
            });

            // 音频进度更新
            audio.addEventListener('timeupdate', () => {
                const progress = (audio.currentTime / audio.duration) * 100;
                progressFill.style.width = `${progress}%`;
                currentTimeEl.textContent = formatTime(audio.currentTime);
            });

            // 音频播放结束重置
            audio.addEventListener('ended', () => {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                progressFill.style.width = '0%';
                currentTimeEl.textContent = '00:00';
                audio.currentTime = 0;
            });

            // 音量控制
            volumeSlider.addEventListener('input', () => {
                audio.volume = volumeSlider.value;
            });
        });

        // 播放/暂停切换
        playBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'flex';
            } else {
                audio.pause();
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        });

        // 时间格式化工具函数
        function formatTime(seconds) {
            if (isNaN(seconds)) return '00:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // 2. 图片上传逻辑
        uploadImgBtn.addEventListener('click', () => {
            imgInput.click();
        });

        imgInput.addEventListener('change', (e) => {
            const files = Array.from(e.target.files);
            if (files.length === 0) return;

            // 验证上传数量（≤3张）
            if (uploadedImages.length + files.length > 3) {
                alert('最多只能上传3张图片');
                return;
            }

            files.forEach(file => {
                // 验证文件大小（≤3MB）
                if (file.size > 3 * 1024 * 1024) {
                    imgErrorModal.style.display = 'flex';
                    return;
                }

                // 验证文件格式
                const allowedTypes = ['image/png', 'image/jpeg', 'image/webp'];
                if (!allowedTypes.includes(file.type)) {
                    imgErrorModal.style.display = 'flex';
                    return;
                }

                // 读取图片并预览
                const reader = new FileReader();
                reader.onload = (e) => {
                    const imgUrl = e.target.result;
                    uploadedImages.push(imgUrl);

                    // 创建预览图元素
                    const previewDiv = document.createElement('div');
                    previewDiv.className = 'preview-img';
                    previewDiv.style.backgroundImage = `url(${imgUrl})`;
                    previewDiv.style.backgroundSize = 'cover';
                    previewDiv.style.backgroundPosition = 'center';

                    // 添加删除按钮
                    const deleteBtn = document.createElement('div');
                    deleteBtn.className = 'delete-img';
                    deleteBtn.textContent = '×';
                    deleteBtn.addEventListener('click', (e) => {
                        e.stopPropagation(); // 阻止触发预览
                        const index = uploadedImages.indexOf(imgUrl);
                        uploadedImages.splice(index, 1);
                        previewDiv.remove();
                    });

                    // 点击预览大图
                    previewDiv.addEventListener('click', () => {
                        previewImg.src = imgUrl;
                        imgPreviewModal.style.display = 'flex';
                    });

                    previewDiv.appendChild(deleteBtn);
                    previewContainer.appendChild(previewDiv);
                };

                // 读取失败处理
                reader.onerror = () => {
                    imgErrorModal.style.display = 'flex';
                };

                reader.readAsDataURL(file);
            });
        });

        // 关闭图片上传失败弹窗
        closeImgErrorBtn.addEventListener('click', () => {
            imgErrorModal.style.display = 'none';
        });

        // 关闭图片预览弹窗（点击任意位置）
        imgPreviewModal.addEventListener('click', () => {
            imgPreviewModal.style.display = 'none';
        });

        // 3. 重置功能逻辑
        resetBtn.addEventListener('click', () => {
            resetModal.style.display = 'flex';
        });

        // 取消重置
        cancelResetBtn.addEventListener('click', () => {
            resetModal.style.display = 'none';
        });

        // 确认重置
        confirmResetBtn.addEventListener('click', () => {
            // 清空所有文本域
            document.querySelectorAll('.answer-input').forEach(input => {
                input.value = '';
            });

            // 清空图片
            uploadedImages = [];
            previewContainer.innerHTML = '';

            // 清空音频
            if (audio) {
                audio.pause();
                audio = null;
                playBtn.disabled = true;
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                progressFill.style.width = '0%';
                currentTimeEl.textContent = '00:00';
                totalTimeEl.textContent = '00:00';
                audioInput.value = '';
            }

            resetModal.style.display = 'none';
        });

        // 4. 导出长图逻辑
        exportBtn.addEventListener('click', () => {
            exportModal.style.display = 'flex';
        });

        // 关闭导出弹窗
        closeExportBtn.addEventListener('click', () => {
            exportModal.style.display = 'none';
        });

        // 点击弹窗外部关闭
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        // 导出JPG长图
        exportJpgBtn.addEventListener('click', () => {
            exportModal.style.display = 'none';
            
            // 缓存原样式，添加导出边距
            const originalPadding = captureArea.style.padding;
            captureArea.style.padding = '20px'; // 导出边距
            captureArea.style.backgroundColor = '#ffffff';

            // 生成截图
            html2canvas(captureArea, {
                scale: 2, // 提升清晰度
                useCORS: true, // 支持跨域图片
                logging: false
            }).then(canvas => {
                // 恢复原样式
                captureArea.style.padding = originalPadding;

                // 生成下载链接
                const link = document.createElement('a');
                link.download = '2025追星总结.jpg';
                link.href = canvas.toDataURL('image/jpeg', 0.9);
                
                // 触发下载
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }).catch(err => {
                console.error('导出失败：', err);
                alert('长图导出失败，请重试！');
                captureArea.style.padding = originalPadding;
            });
        });
    </script>
</body>
</html>